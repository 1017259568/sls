# 简介 {#concept_ddt_5ht_2fb .concept}

日志服务支持根据快速查询设置告警，实现实时的服务状态监控。

## 功能实现 {#section_qhn_sst_2fb .section}

日志服务的告警功能基于快速查询实现。在日志服务控制台查询页面设置告警规则，并指定告警规则的属性、检查条件和告警动作。[设置告警](intl.zh-CN/用户指南/告警与通知/设置告警.md)后，日志服务定期对采集到的日志数据自动执行快速查询，查询结果满足预设条件时发送告警通知，实现实时的服务状态监控。

-   **告警规则属性**：可设置数据检查的时间和间隔，日志服务根据设置定期执行检查。
-   **检查条件**：可设置检查条件的比较字段、比较符和检查阈值。比较符和检查阈值构成检查条件，比较字段的查询结果满足检查条件时发送告警通知。
-   **告警动作**：设置告警的通知方式和内容。推荐设置通知方式为**通知中心**，告警通知会以站内通知和短信、邮件的形式发送给通知中心预设的联系人。

## 告警中的快速查询 {#section_j32_nst_2fb .section}

快速查询中的查询语句可以是查询语句或查询分析语句。

-   查询语句：直接返回查询条件命中的日志数据。
-   查询分析语句：对查询条件命中的日志进行统计，返回统计结果。

-   **查询语句**

    例如，查询最近 15 分钟内包含 error 的数据，条件为 error，一共有 154 条。每条内容都是 Key、Value 组合，您可以对某个 Key 下的 Value 设置告警条件。

    **说明：** 对于查询结果一次超过 10 条的情况，告警规则只判断前10条 ，只有前10条中任意一条符合条件，才会触发告警。

    ![](images/5772_zh-CN.png "查询语句")

-   **查询分析语句**

    例如查询所有日志中状态码为200的日志比例，查询语句如下（查询语法请参考[查询语法](intl.zh-CN/用户指南/索引与查询/查询语法.md)）：

    ```
    * | select sum(case when status=200 then 1 else 0 end) *1.0/count(1)  as ratio
    ```

    因此，可以设置告警检查条件为`ratio < 0.9`，表示当状态码为200的日志小于总日志数的90%时进行告警。

    ![](images/5773_zh-CN.png "查询分析语句")


