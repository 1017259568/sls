# Collection procedure {#task_htt_wlz_32b .task}

In the Anti-DDoS Pro console, you can enable DDos log collection function for the website.

1.  Enable Anti-DDoS Pro function, purchase Anti-DDoS Pro instances, and [Online configuration](https://www.alibabacloud.com/help/doc-detail/35216.html).
2.  Enable Anti-DDoS Pro function, purchase Anti-DDoS Pro instances.
3.  Activate Log Service.

Log Service supports real-time collection of **Alibaba Cloud Anti-DDoS Pro** website access logs, CC attack logs, and supports real-time query and analysis of collected log data. The results of the query are displayed in the form of dashboards, and logs are used to analyze the access and attack behavior in real time, and assist the security department to formulate a protection strategy.

1.  Log on to the Anti-DDoS Pro console and select **Log** \> **Full Log** in the left-side navigation pane. Enter the Full Log page. 
2.  If you are configuring DDoS log collection for the first time, follow the instructions on the page.  DDoS has permission to distribute DDoS logs to your Logstore after authorization.
3.  Select the website for which you want to enable DDoS log collection function and make sure the **Status** is on. 

     ![](images/6786_en-US.jpg "Enable the function") 

    At this point, you have successfully enabled DDoS log collection for the current website. Log Service automatically creates a Logstore under your account. DDoS imports all the logs of the website that have this feature enabled into this Logstore. For Logstore default configurations, see [Default configuration](reseller.en-US/User Guide/Cloud product collection/DDoS log collection/Collection procedure.md#table_q3w_jrm_j2b).

    |Default configuration item|Configuration content|
    |:-------------------------|:--------------------|
    |Project|By default, `ddos-pro-logstore` project is created.|
    |Logstore|By default, Logstore is created. Logstore name is determined by the domain of the DDoS you purchased.    -   DDoS instances in mainland China: `ddos-pro-project-Alibaba Cloud Account ID-cn-hangzhou`.
    -   Other DDoS instances: `ddos-pro-project-Alibaba Cloud Account ID-ap-southeast-1`
All logs generated by the DDoS log collection function are saved in this Logstore.

|
    |Region|     -   If the DDoS region is in mainland China, the default project is saved in China East 1.
    -   If the DDoS region is outside mainland China, the default project is saved in Asia Pacific SE 1.
 |
    |Shard|By default, two shards are created and the [Auto split shard](reseller.en-US/User Guide/Preparation/Manage a Shard.md) feature is turned on.|
    |Log storage time|The default storage time is three days, within the free quota. After three days logs are automatically deleted.For longer storage time, you can customize the configurations. For more information, see the **How to modify the storage time of the website log** section in [Billing method](reseller.en-US/User Guide/Cloud product collection/DDoS log collection/Billing method.md).

|
    |Dashboard|By default, two dashboards are created:    -   `**ddos-pro-logstore\_**ddos_operation_center`: Operation center
    -   `**ddos-pro-logstore\_**ddos_access_center`: Access center
For more information about dashboards, see [Log Report](reseller.en-US/User Guide/Cloud product collection/DDoS log collection/Log Report.md).|

    You can query and analyze the collected logs in real time on the currentFull Log page. See the following figure for a log field description.  In addition, Log Service creates two DDoS Operation center and Access center dashboards. You can also customize the dashboard configurations.

    |Field |Description |Example|
    |:-----|:-----------|:------|
    |\_\_topic\_\_  |The topic of the log is fixed to ddos\_access\_log.|-|
    |body\_bytes\_sent|Request to send the size of the Body. The unit is byte.|2|
    |content\_type|Content type.|application/x-www-form-urlencoded|
    |host|Source website.|api.zhihu.com|
    |http\_cookie|Request cookie.|k1=v1;k2=v2|
    |http\_referer|Request referer. If none, the `-` is displayed.|http://xyz.com|
    |http\_user\_agent |User agent request.|Dalvik/2.1.0 \(Linux; U; Android 7.0; EDI-AL10 Build/HUAWEIEDISON-AL10\)|
    |http\_x\_forwarded\_for|The upstream user IP that is redirected by the proxy.|-|
    |https|Whether the request is an HTTPS request, wherein:    -   true: the request is an HTTPS request.
    -   false: the request is an HTTP request.
|true|
    |matched\_host|The source website of the matching configuration may be a pan-domain name. If not matching, the `-` is displayed.|\*.zhihu.com|
    |real\_client\_ip|Access the customer real IP. If not available, the `-` is displayed.|1.2.3.4|
    |isp\_line|Line information, such as BGP, telecommunication, Unicom.|Telecommunication|
    |remote\_addr|Request client IP connection.|1.2.3.4|
    |remote\_port|Request client port connection.|23713|
    |request\_length|The length of the request. The unit is byte.|123|
    |request\_method|The HTTP request method.|GET|
    |request\_time\_msec|Request time. The unit is microsecond.|44|
    |request\_uri|Request path.|/answers/377971214/banner|
    |server\_name|The matching host name. If not matching, the `default` is displayed.|api.abc.com|
    |status|HTTP status code.|200|
    |time|Time.|2018-05-02T16:03:59+08:00|
    |cc\_action|CC protection policy, such as none, challenge, pass, close, captcha, wait, login, n.|close|
    |cc\_blocks|Indicates whether CC protection is blocked, wherein:    -   1: Blocked.
    -   Other codes: Passed.
|1|
    |cc\_phase|CC protection policy, including seccookie, server\_ip\_blacklist, static\_whitelist, server\_header\_blacklist, server\_cookie\_blacklist, server\_args\_blacklist, qps\_overmax.|server\_ip\_blacklist|
    |ua\_browser|Browser.|ie9|
    |ua\_browser\_family|Browser series.|internet explorer|
    |ua\_browser\_type|Browser type.|web\_browser|
    |ua\_browser\_version|Browser version.|9.0|
    |ua\_device\_type|Client device type.|computer|
    |ua\_os|Client operating system.|windows\_7|
    |ua\_os\_family|Client operating system series.|windows|
    |upstream\_addr|Return source address list, the format is `IP:Port`. Multiple addresses are separated by commas.|1.2.3.4:443|
    |upstream\_ip|The actual return source address IP. |1.2.3.4|
    |upstream\_response\_time|The response time of the source. The unit is second.|0.044|
    |upstream\_status|Return source request HTTP status.|200|
    |user\_id|Alibaba Cloud user ID.|12345678 |


-   Click **Log Analysis**, [Query Analysis](reseller.en-US/User Guide/Cloud product collection/DDoS log collection/Log analysis.md) on the collected log data.
-   Click **Log Report** to view the built-in [dashboard](reseller.en-US/User Guide/Cloud product collection/DDoS log collection/Log Report.md).
-   Click **Advanced Management** to go to Log Service console to query and collect statistics, stream consumption, and set alarms for the collected log data.

